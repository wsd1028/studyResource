<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport"
        content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no,minimal-ui" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="renderer" content="webkit" />
    <meta name="full-screen" content="yes" />
    <meta name="x5-fullscreen" content="true" />
    <meta name="format-detection" content="telphone=no, email=no" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <title>大屏</title>
    <link rel="stylesheet" href="./css/vant.css">


    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        [v-cloak] {
            display: none;
        }

        html,
        body {
            height: 100%;
            background-color: #f5f5f5;
        }


        .title {
            height: 40px;
            line-height: 40px;
            text-align: center;
            font-size: 1em;
            background-color: #fff;
        }


        .content {
            padding: 20px;
        }

        .wait {
            width: 100%;
            height: 160px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #fff;
            border-radius: 4px;
            margin-top: 20px;
        }

        .wait .text {
            font-size: 1em;
        }

        .span {
            color: #409EFF;
        }

        .rack {
            width: 100%;
            position: relative;
            margin-top: 20px;
            background-color: #fff;
            border-radius: 4px;
        }

        #rack {
            width: 100%;
            height: 200px
        }

        .rackMsg {
            position: absolute;
            top: 10px;
            color: #666;
            right: 10px;
            font-size: 14px;
        }

        .bandwidth,
        .topBandwidth,
        .topRack {
            width: 100%;
            height: 200px;
        }

        #bandwidth,
        #topBandwidth,
        #topRack {
            width: 100%;
            height: 100%;
            margin-top: 20px;
            background-color: #fff;
            border-radius: 4px;
        }
    </style>
</head>

<body>
    <div id="main" v-cloak>
        <div class="title">
            IDC集约运营管控平台
            <span class="span">欢迎您</span>
        </div>
        <div class="content">
            <van-tabs v-model="active" swipeable color="#409EFF">
                <van-tab title="待办事件">
                    <div class="wait">
                        <div>
                            <van-icon name="bell" color="#409EFF" size="2em"></van-icon>
                            <p class="text">
                                您有待处理事项
                                <span class="span">
                                    100条
                                </span>
                            </p>
                        </div>
                    </div>
                </van-tab>
                <van-tab title="资源情况">
                    <div class="rack">
                        <p class="rackMsg">已租用
                            <span class="span">100</span>个
                        </p>
                        <div id="rack"></div>
                    </div>
                    <div class="bandwidth">
                        <div id="bandwidth"></div>
                    </div>
                    <div class="topRack">
                        <div id="topRack"></div>
                    </div>
                    <div class="topBandwidth">
                        <div id="topBandwidth"></div>
                    </div>
                </van-tab>
            </van-tabs>
        </div>
    </div>
    <script src="./js/echarts/dist/echarts.min.js"></script>
    <script src="./js/vue.js"></script>
    <script src="./js/vant.min.js"></script>
    <script>
        var app = new Vue({
            el: "#main",
            data: {
                active: 1,
                rack: null,
                topRack: null,
                bandwidth: null,
                topBandwidth: null
            },
            methods: {
                drawRack: function (msg) {
                    let {
                        id,
                        data
                    } = msg;
                    data = [{
                            value: 335,
                            name: '总占比'
                        },
                        {
                            value: 310,
                            name: '空闲'
                        },
    
                    ];
                    this[id] = echarts.init(document.getElementById(id));
                    let option = {
                        title: {
                            text: '机架使用情况',
                            left: 10,
                            top: 10,
                            textStyle: {
                                color: "#666",
                                fontSize: "14"
                            }
                        },
                        tooltip: {
                            trigger: 'item',
                            formatter: "{a} <br/>{b} : {c} ({d}%)"
                        },
                        color: ["#12A87F", "#2196F3"],
                        legend: {
                            x: 'center',
                            y: 'bottom',
                            data: ['总占比']
                        },
                        series: [{
                            name: '机架',
                            type: 'pie',
                            radius: '55%',
                            center: ['50%', '50%'],
                            data: data,
                            itemStyle: {
                                normal: {
                                    label: {
                                        formatter: function (params) {
                                            return params.percent + "%"
                                        }
                                    }
                                },
                                emphasis: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                }
                            }
                        }]
                    };
                    this[id].setOption(option)
                },
                drawBandwidth: function (msg) {
                    let {
                        id,
                        xData,
                        yData,
                    } = msg;
                    xData = ['一月', '二月', '三月', '四月', '五月', '六月', '七月'];
                    yData = [820, 932, 901, 934, 1290, 1330, 1320];
                    this[id] = echarts.init(document.getElementById(id));
                    let option = {
                        title: {
                            text: '带宽使用情况',
                            x: "center",
                            top: 10,
                            textStyle: {
                                color: "#666",
                                fontSize: "14"
                            }
                        },
                        xAxis: {
                            type: 'category',
                            data: xData,
                            axisLabel: {
                                show: true,
                                textStyle: {
                                    color: "#666"
                                }
                            },
                           
                        },
                        grid: {
                            top: 60,
                            bottom: 40,
                            left: 50,
                            right: 20
                        },
                        color: ["#12A87F"],
                        yAxis: {
                            type: 'value',
                            name: "单位(G)",
                            nameTextStyle: {
                                color: "#666"
                            },
                          
                            axisLabel: {
                                show: true,
                                textStyle: {
                                    color: "#666"
                                }
                            },
                        },
                        legend: {
                            right: 20,
                            top: 30,
                            data: ['已销售带宽']
                        },
                        series: [{
                            name: "已销售带宽",
                            showSymbol: false,
                            data: yData,
                            type: 'line'
                        }]
                    };
                    this[id].setOption(option)
                },
                drawTopRack: function (msg) {
                    let {
                        id
                    } = msg;
                    this[id] = echarts.init(document.getElementById(id));
                    let option = {
                        title: {
                            text: 'TOPN用户机架',
                            x: "center",
                            top: 10,
                            textStyle: {
                                color: "#666",
                                fontSize: "14"
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'shadow'
                            }
                        },
                        color: ["#12A87F"],
                        grid: {
                            left: 30,
                            right: 20,
                            bottom: 20,
                            top: 40,
                            containLabel: true
                        },
                        xAxis: {
                            type: 'value',
                            boundaryGap: [0, 0.01],
                            name: "单位(个)",
                            nameGap: 10,
                            nameLocation: "start",
                            splitLine: {
                                show: false,
                                lineStyle: {
                                    color: 'red'
                                }
                            },
                        },
                        yAxis: {
                            type: 'category',
                            data: ['巴西', '印尼', '美国', '印度', '中国'],
                            splitLine: {
                                show: true,
                            },
                        },
                        series: [{
                                name: '',
                                type: 'bar',
                                data: [183, 239, 855, 104, 174]
                            },
    
                        ]
                    };
                    this[id].setOption(option);
                },
    
                drawTopBandwidth: function (msg) {
                    let {
                        id
                    } = msg;
                    this[id] = echarts.init(document.getElementById(id));
                    let option = {
                        title: {
                            text: 'TOPN用户带宽',
                            x: "center",
                            top: 10,
                            textStyle: {
                                color: "#666",
                                fontSize: "14"
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'shadow'
                            }
                        },
                        color: ["#12A87F"],
                        grid: {
                            left: 30,
                            right: 20,
                            bottom: 20,
                            top: 40,
                            containLabel: true
                        },
                        xAxis: {
                            type: 'value',
                            boundaryGap: [0, 0.01],
                            name: "单位(G)",
                            nameGap: 10,
                            nameLocation: "start",
                            splitLine: {
                                show: false,
                                lineStyle: {
                                    color: 'red'
                                }
                            },
                        },
                        yAxis: {
                            type: 'category',
                            data: ['巴西', '印尼', '美国', '印度', '中国'],
                            splitLine: {
                                show: true,
                            },
                        },
                        series: [{
                                name: '',
                                type: 'bar',
                                data: [183, 239, 855, 104, 174]
                            },
    
                        ]
                    };
                    this[id].setOption(option);
                },
            },
            mounted: function () {
                setTimeout(() => {
                    this.drawRack({
                        id: "rack"
                    });
                    this.drawBandwidth({
                        id: "bandwidth"
                    });
                    this.drawTopRack({
                        id: "topRack"
                    });
                    this.drawTopBandwidth({
                        id: "topBandwidth"
                    });
                }, 10)
                window.addEventListener("resize", () => {
                    if (this.rack)
                        this.rack.resize();
                    if (this.topRack)
                        this.topRack.resize();
                    if (this.bandwidth)
                        this.bandwidth.resize();
                    if (this.topBandwidth)
                        this.topBandwidth.resize();
                })
            }
        });
    </script>
</body>

</html>