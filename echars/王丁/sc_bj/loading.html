<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge;IE=10;IE=9" />
    <title>Ajax Loading Demo</title>
    <script src="js/jquery-1.11.2.min.js" type="text/javascript"></script>
    <script src="js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
    <!--原版压缩spin.js-->
    <script type="text/javascript" src="js/spin/spin.min.js"></script>
    <link href="css/spin/spin.css" rel="stylesheet" type="text/css" />
    <link href="css/index.css" rel="stylesheet" type="text/css" />
    <style>
        #firstDiv { background: rgba(14, 41, 128, 0.5) !important; color: #fff; float: left; width: 220px; height: 220px; margin: 0 20px 20px 0; -webkit-border-radius: 10px; -moz-border-radius: 10px; border-radius: 10px; }
    </style>
    <script type="text/javascript">
        //opts 可从网站在线制作
        var opts = {
            lines: 17, // 花瓣数目
            length: 9, // 花瓣长度
            width: 3, // 花瓣宽度
            radius: 17, // 花瓣距中心半径
            corners: 1, // 花瓣圆滑度 (0-1)
            rotate: 90, // 花瓣旋转角度
            color: '#fff', // 花瓣颜色
            speed: 2.2, // 花瓣旋转速度
            trail: 99, // 花瓣旋转时的拖影(百分比)
            shadow: false, // 花瓣是否显示阴影
            hwaccel: true, //spinner 是否启用硬件加速及高速旋转
            className: 'spinner', // spinner css 样式名称
            zIndex: 2e9, // spinner的z轴 (默认是2000000000)
            top: 'auto', // spinner 相对父容器Top定位 单位 px
            left: 'auto' // spinner 相对父容器Left定位 单位 px
        };
       /* Values =[
            "成都天府热线二枢纽数据中心",
            "四川成都西信IDC数据中心",
            "四川成都光华IDC数据中心",
            "四川成都太升IDC数据中心",
            "四川成都莲花IDC数据中心",
            "四川成都沙河堡IDC数据中心",
            "四川成都西信西区803数据中心",
            "四川成都西信西区806数据中心",
            "四川成都西信805数据中心",
            "成都中立IDC数据中心",
            "天府新区云计算中心",
            "四川宜宾IDC数据中心",
            "绵阳永兴数据中心",
            "乐山天星路数据中心",
            "四川自贡IDC数据中心",
            "德阳珠江路数据中心",
            "四川遂宁IDC数据中心",
            "四川阿坝州IDC数据中心",
            "眉山电信大楼数据中心",
            "四川内江IDC数据中心",
            "四川凉山州IDC数据中心",
            "资阳数据中心",
            "攀枝花人民街数据中心",
            "四川达州IDC数据中心",
            "四川广元IDC数据中心",
            "四川泸州电信IDC数据中心",
            "四川南充三元路IDC数据中心",
            "四川广安IDC数据中心"
        ]*/
        var spinner = new Spinner(opts);
        spinner.spin(target);
        $(document).ready(function () {
            $("#btnRequest").bind("click", function () {
                ajaxRequestData();
            })
        })

        function ajaxRequestData() {
            $.ajax({
                type: "POST",
                timeout: 9999,
                dataType: "text",
                url: "http://www.baidu.com",
                beforeSend: function () {
                    //异步请求时spinner出现
                    $("#firstDiv").text("");
                    var target = $("#firstDiv").get(0);
                    spinner.spin(target);
                },
                success: function (msg) {
                    $("#firstDiv").text(msg);
                    //关闭spinner
                    spinner.spin();
                },
                error: function (e, jqxhr, settings, exception) {
                    $("#firstDiv").text("请求发生错误...");
                    //关闭spinner
                    spinner.spin();
                }
            })
        }
    </script>
</head>
<body>
    <div id="firstDiv">

    </div>
    <div id="secondDiv">
        <input id="btnRequest" type="button" value="请求数据" class="btnStyle" />
    </div>
    <script>
        $.fn.spin = function (opts) {
            this.each(function () {
                var $this = $(this),
                    data = $this.data();

                if (data.spinner) {
                    data.spinner.stop();
                    delete data.spinner;
                }
                if (opts !== false) {
                    data.spinner = new Spinner($.extend({ color: $this.css('color') }, opts)).spin(this);
                }
            });
            return this;
        };
        //$('#dot').spin();
        prettyPrint();
        function update() {
            var opts = {};
            $('#opts input[min]').each(function () {
                $('#opt-' + this.name).text(opts[this.name] = parseFloat(this.value));
            });
            $('#opts input:checkbox').each(function () {
                opts[this.name] = this.checked;
                $('#opt-' + this.name).text(this.checked);
            });
            $('#firstDiv').spin(opts);
            if ($('#share').is(':checked')) {
                window.location.replace('#?' + $('form').serialize());
            }
        }
        $(function () {
            var params = {};
            var hash = /^#\?(.*)/.exec(location.hash);
            if (hash) {
                $('#share').prop('checked', true);
                $.each(hash[1].split(/&/), function (i, pair) {
                    var kv = pair.split(/=/);
                    params[kv[0]] = kv[kv.length - 1];
                });
            }
            $('#opts input[min]').each(function () {
                var val = params[this.name];
                if (val !== undefined) this.value = val;
                this.onchange = update;
            });
            $('#opts input:checkbox').each(function () {
                this.checked = !!params[this.name];
                this.onclick = update;
            });
            $('#share').click(function () {
                window.location.replace(this.checked ? '#?' + $('form').serialize() : '#!');
            });
            update();
        });
    </script>
</body>
</html>